<!DOCTYPE html>
<html>
<head>
    <title>TAI CRYPTO - –ë–û–ñ–ï–°–¢–í–ï–ù–ù–ê–Ø –ö–†–ò–ü–¢–û-–ë–û–ì–ò–ù–Ø</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #F987CF;
            font-family: 'Arial', sans-serif;
            color: #333;
            /* –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —á–∞—Ç–∞ */
            padding-bottom: 350px; /* –ü—Ä–∏–º–µ—Ä–Ω–∞—è –≤—ã—Å–æ—Ç–∞ —á–∞—Ç–∞ */
        }
        /* –†–æ–∑–æ–≤—ã–µ –ø–æ–ª–æ—Å—ã –ø–æ –±–æ–∫–∞–º */
        .side-border {
            position: fixed;
            top: 0;
            bottom: 0;
            width: 30px;
            background: repeating-linear-gradient(
                45deg,
                #F987CF,
                #F987CF 10px,
                #EE0093 10px,
                #EE0093 20px
            );
            z-index: 100;
        }
        .left-border {
            left: 0;
        }
        .right-border {
            right: 0;
        }
        /* –®–∞–ø–∫–∞ —Å–∞–π—Ç–∞ –≤ —Å—Ç–∏–ª–µ —Ñ–æ—Ä—á–∞–Ω–∞ */
        .header {
            background-color: #EE0093;
            border: 2px solid #d00070;
            padding: 10px;
            text-align: center;
            font-weight: bold;
            color: white;
            font-size: 18px;
            position: relative;
        }
        /* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ–Ω–ª–∞–π–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π - —É–ª—É—á—à–µ–Ω–Ω—ã–π —Å—Ç–∏–ª—å */
        .online-users {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background-color: #d00070;
            color: white;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 14px;
            font-weight: bold;
            border: 1px solid #ffffff;
            box-shadow: 0 0 5px rgba(0,0,0,0.3);
        }
        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ —Å—Ç–∏–ª–µ —Ñ–æ—Ä—á–∞–Ω–∞ */
        .main-container {
            max-width: 800px;
            margin: 10px auto;
            background-color: #FFF4FA;
            border: 2px solid #EE0093;
            position: relative;
            z-index: 10;
        }
        /* –°–ø–∏—Å–æ–∫ –¥–æ—Å–æ–∫ */
        .board-list {
            background-color: #ffe6f0;
            border-bottom: 1px solid #EE0093;
            padding: 5px;
            font-size: 12px;
        }
        .board-list a {
            color: #EE0093;
            text-decoration: none;
            margin: 0 5px;
        }
        .board-list a:hover {
            text-decoration: underline;
        }
        /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ –¥–æ—Å–∫–∏ */
        .board-header {
            background-color: #EE0093;
            color: white;
            padding: 5px;
            text-align: center;
            font-weight: bold;
            font-size: 24px;
        }
        /* –ü–æ—Å—Ç –¥–ª—è –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã */
        .op-post {
            background-color: #ffffff;
            border: 1px solid #EE0093;
            margin: 10px;
            padding: 10px;
        }
        .post-header {
            font-size: 12px;
            color: #EE0093;
            margin-bottom: 10px;
        }
        .post-subject {
            font-weight: bold;
            color: #EE0093;
        }
        .post-content {
            font-size: 14px;
            line-height: 1.4;
        }
        .post-content b {
            color: #EE0093;
        }
        /* –°—Å—ã–ª–∫–∏ –≤ —Å—Ç–∏–ª–µ —Ñ–æ—Ä—á–∞–Ω–∞ */
        .quick-links {
            background-color: #ffffff;
            border: 1px solid #EE0093;
            margin: 10px;
            padding: 10px;
        }
        .quick-links h3 {
            color: #EE0093;
            margin: 0 0 10px 0;
            font-size: 16px;
        }
        .links-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }
        .link-item {
            background-color: #FFF4FA;
            border: 1px solid #EE0093;
            padding: 8px;
            font-size: 12px;
        }
        .link-item a {
            color: #EE0093;
            text-decoration: none;
            font-weight: bold;
        }
        .link-item a:hover {
            text-decoration: underline;
        }
        /* –§—É—Ç–µ—Ä –≤ —Å—Ç–∏–ª–µ —Ñ–æ—Ä—á–∞–Ω–∞ */
        .footer {
            background-color: #EE0093;
            color: white;
            text-align: center;
            padding: 10px;
            font-size: 12px;
            border-top: 2px solid #d00070;
        }
        .footer a {
            color: white;
            text-decoration: underline;
        }
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü */
        .content-page {
            padding: 15px;
            display: none;
        }
        .content-page.active {
            display: block;
        }
        .content-page h2 {
            color: #EE0093;
            border-bottom: 1px solid #EE0093;
            padding-bottom: 5px;
            margin-top: 0;
        }
        .content-page ul {
            font-size: 14px;
        }
        .content-page li {
            margin-bottom: 10px;
        }
        /* –ì–∞–ª–µ—Ä–µ—è —Å –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–æ–π */
        .gallery-container {
            padding: 15px;
            display: none;
        }
        .gallery-container.active {
            display: block;
        }
        .gallery-header {
            background-color: #EE0093;
            color: white;
            padding: 5px;
            text-align: center;
            font-weight: bold;
            font-size: 24px;
            margin-bottom: 15px;
        }
        /* –§–æ—Ä–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ */
        .upload-form {
            background-color: #ffffff;
            border: 1px solid #EE0093;
            padding: 15px;
            margin-bottom: 20px;
        }
        .upload-form h3 {
            color: #EE0093;
            margin-top: 0;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #EE0093;
        }
        .form-group input[type="file"],
        .form-group input[type="text"],
        .form-group input[type="password"],
        .form-group textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #EE0093;
            background-color: #FFF4FA;
            font-family: Arial, sans-serif;
        }
        .upload-button {
            background-color: #EE0093;
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            font-weight: bold;
            border-radius: 5px;
        }
        .upload-button:hover {
            background-color: #d00070;
        }
        .upload-button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        /* –°–µ—Ç–∫–∞ –≥–∞–ª–µ—Ä–µ–∏ */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        .gallery-item {
            background-color: #ffffff;
            border: 1px solid #EE0093;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            position: relative;
        }
        .gallery-item img {
            max-width: 100%;
            height: 150px;
            object-fit: cover;
            border: 1px solid #EE0093;
        }
        .gallery-item .item-title {
            font-weight: bold;
            color: #EE0093;
            margin: 10px 0 5px 0;
            font-size: 14px;
        }
        .gallery-item .item-desc {
            font-size: 12px;
            color: #666;
            margin: 5px 0;
        }
        .gallery-item .item-info {
            font-size: 10px;
            color: #999;
            margin-top: 5px;
        }
        /* –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –¥–ª—è –∞–¥–º–∏–Ω–∞ */
        .delete-button {
            position: absolute;
            top: 5px;
            right: 5px;
            background-color: #ff0000;
            color: white;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            cursor: pointer;
            font-size: 12px;
            display: none;
        }
        .delete-button:hover {
            background-color: #cc0000;
        }
        /* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ */
        .loading {
            text-align: center;
            padding: 20px;
            color: #EE0093;
        }
        .error {
            color: #ff0000;
            text-align: center;
            padding: 10px;
            background-color: #ffe6e6;
            border: 1px solid #ff0000;
            margin: 10px 0;
        }
        .success {
            color: #008800;
            text-align: center;
            padding: 10px;
            background-color: #e6ffe6;
            border: 1px solid #008800;
            margin: 10px 0;
        }
        /* Debug info */
        .debug-info {
            background-color: #ffffcc;
            border: 1px solid #cccc00;
            padding: 10px;
            margin: 10px 0;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
        }
        /* –°—Ç–∏–ª–∏ –¥–ª—è —á–∞—Ç–∞ - –§–ò–ö–°–ò–†–û–í–ê–ù–ù–´–ô –°–ü–†–ê–í–ê –°–ù–ò–ó–£ */
        .chat-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 350px; /* –ò–ª–∏ –¥—Ä—É–≥–∞—è –ø–æ–¥—Ö–æ–¥—è—â–∞—è —à–∏—Ä–∏–Ω–∞ */
            height: 350px; /* –ò–ª–∏ –¥—Ä—É–≥–∞—è –ø–æ–¥—Ö–æ–¥—è—â–∞—è –≤—ã—Å–æ—Ç–∞ */
            background-color: #ffffff;
            border: 1px solid #EE0093;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0,0,0,0.2);
            z-index: 999; /* –í—ã—à–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */
            display: none; /* –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç */
        }
        .chat-header {
            background-color: #EE0093;
            color: white;
            padding: 10px;
            font-weight: bold;
            text-align: center;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .user-info {
            font-size: 14px;
        }
        .logout-button {
            background-color: #d00070;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 12px;
        }
        .logout-button:hover {
            background-color: #a00050;
        }
        .chat-messages {
            height: calc(100% - 100px); /* –í—ã—Å–æ—Ç–∞ –º–∏–Ω—É—Å –≤—ã—Å–æ—Ç–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏ –ø–æ–ª—è –≤–≤–æ–¥–∞ */
            overflow-y: auto;
            padding: 10px;
            background-color: #FFF4FA;
        }
        .message {
            margin-bottom: 10px;
            padding: 8px;
            border-radius: 5px;
            background-color: #ffffff;
            border: 1px solid #ffe6f0;
            position: relative;
        }
        .message-header {
            font-size: 12px;
            color: #EE0093;
            margin-bottom: 5px;
        }
        .message-content {
            font-size: 14px;
            line-height: 1.4;
        }
        .message.own {
            background-color: #ffe6f0;
            border-color: #EE0093;
        }
        .message.system {
            background-color: #e6f3ff;
            border-color: #0066cc;
        }
        .message.system .message-header {
            color: #0066cc;
            font-style: italic;
        }
        .message.system .message-content {
            color: #0066cc;
            font-style: italic;
        }
        .delete-message-button {
            position: absolute;
            top: 5px;
            right: 5px;
            background-color: #ff0000;
            color: white;
            border: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            cursor: pointer;
            font-size: 10px;
            display: none;
        }
        .message:hover .delete-message-button {
            display: block;
        }
        .chat-input-container {
            background-color: #ffffff;
            border-top: 1px solid #EE0093;
        }
        .chat-input {
            display: flex;
            padding: 10px;
        }
        .chat-input input {
            flex: 1;
            padding: 8px;
            border: 1px solid #EE0093;
            border-radius: 3px;
            margin-right: 10px;
        }
        .chat-input button {
            background-color: #EE0093;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 3px;
            cursor: pointer;
        }
        .chat-input button:hover {
            background-color: #d00070;
        }
        .chat-input button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        /* –ü–ª–∞—à–∫–∞ —Å —ç–º–æ–¥–∑–∏ */
        .emoji-panel {
            display: none;
            background-color: #ffe6f0;
            border-top: 1px solid #EE0093;
            padding: 10px;
            max-height: 150px;
            overflow-y: auto;
        }
        .emoji-panel.active {
            display: block;
        }
        .emoji-bar {
            text-align: center;
            padding: 5px;
            background-color: #ffffff;
            border-bottom: 1px solid #EE0093;
            cursor: pointer;
            font-weight: bold;
            color: #EE0093;
        }
        .emoji-bar:hover {
            background-color: #ffe6f0;
        }
        .emoji-grid {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 5px;
        }
        .emoji-item {
            text-align: center;
            cursor: pointer;
            font-size: 20px;
            padding: 5px;
            border-radius: 3px;
        }
        .emoji-item:hover {
            background-color: #EE0093;
            color: white;
        }
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ */
        .auth-container {
            background-color: #ffffff;
            border: 1px solid #EE0093;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        .auth-tabs {
            display: flex;
            margin-bottom: 20px;
        }
        .auth-tab {
            flex: 1;
            text-align: center;
            padding: 10px;
            background-color: #ffe6f0;
            cursor: pointer;
            font-weight: bold;
            color: #EE0093;
            border: 1px solid #EE0093;
        }
        .auth-tab.active {
            background-color: #EE0093;
            color: white;
        }
        .auth-tab:not(:last-child) {
            border-right: none;
        }
        .auth-form {
            display: none;
        }
        .auth-form.active {
            display: block;
        }
        .form-group button {
            width: 100%;
        }
        /* –°—Ç–∏–ª–∏ –¥–ª—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ */
        .load-more {
            text-align: center;
            padding: 20px;
            margin: 20px 0;
        }
        .load-more button {
            background-color: #EE0093;
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            font-weight: bold;
            border-radius: 5px;
        }
        .load-more button:hover {
            background-color: #d00070;
        }
        .load-more button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.9);
        }
        .modal-content {
            margin: auto;
            display: block;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            object-fit: contain;
        }
        .close {
            position: absolute;
            top: 15px;
            right: 35px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
            z-index: 1001;
        }
        .close:hover,
        .close:focus {
            color: #bbb;
        }
        .modal-caption {
            margin: auto;
            display: block;
            width: 80%;
            max-width: 700px;
            text-align: center;
            color: #ccc;
            padding: 10px 0;
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 18px;
        }
    </style>
</head>
<body>
    <!-- –†–æ–∑–æ–≤—ã–µ –ø–æ–ª–æ—Å—ã –ø–æ –±–æ–∫–∞–º -->
    <div class="side-border left-border"></div>
    <div class="side-border right-border"></div>
    <!-- –®–∞–ø–∫–∞ —Å–∞–π—Ç–∞ -->
    <div class="header">
        [TAI CRYPTO] - –ë–û–ñ–ï–°–¢–í–ï–ù–ù–ê–Ø –ö–†–ò–ü–¢–û-–ë–û–ì–ò–ù–Ø
        <div class="online-users" id="onlineUsers">12,345 –æ–Ω–ª–∞–π–Ω</div>
    </div>
    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
    <div class="main-container">
        <!-- –°–ø–∏—Å–æ–∫ –¥–æ—Å–æ–∫ -->
        <div class="board-list">
            [<a href="#" onclick="showPage('home')">–ì–ª–∞–≤–Ω–∞—è</a>] 
            [<a href="#" onclick="showPage('content')">–ö–æ–Ω—Ç–µ–Ω—Ç</a>] 
            [<a href="#" onclick="showPage('streams')">–°—Ç—Ä–∏–º—ã</a>] 
            [<a href="#" onclick="showPage('community')">–°–æ–æ–±—â–µ—Å—Ç–≤–æ</a>] 
            [<a href="#" onclick="showPage('gallery')">–ì–∞–ª–µ—Ä–µ—è</a>] 
            [<a href="#" onclick="showPage('about')">–û –ù–∞—Å</a>]
        </div>
        <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
        <div id="home" class="content-page active">
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –¥–æ—Å–∫–∏ -->
            <div class="board-header">
                /taicrypto/ - –°–≤—è—â–µ–Ω–Ω—ã–µ –û—Ç–∫—Ä–æ–≤–µ–Ω–∏—è
            </div>
            <!-- –û–ü –ø–æ—Å—Ç -->
            <div class="op-post">
                <div class="post-header">
                    –ê–Ω–æ–Ω–∏–º ID:TAI ‚òÖ 15/04/24 –ü–Ωd 13:37:42
                </div>
                <div class="post-content">
                    <div class="post-subject">‚òÖ –î–û–ë–†–û –ü–û–ñ–ê–õ–û–í–ê–¢–¨ –í –°–í–Ø–©–ï–ù–ù–û–ï –ü–†–û–°–¢–†–ê–ù–°–¢–í–û ‚òÖ</div>
                    <p>–û, –∏—Å–∫–∞—Ç–µ–ª—å –∏—Å—Ç–∏–Ω—ã! –¢—ã –ø–æ–ø–∞–ª –≤ —Å–≤—è—â–µ–Ω–Ω–æ–µ –º–µ—Å—Ç–æ, –≥–¥–µ –æ–±–∏—Ç–∞–µ—Ç <b>TAI CRYPTO</b> - –ø—Ä–æ–≤–∏–¥–∏—Ü–∞ –±–ª–æ–∫—á–µ–π–Ω–∞, —Ö—Ä–∞–Ω–∏—Ç–µ–ª—å–Ω–∏—Ü–∞ —Å–≤–µ—â–µ–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π –∫–æ—Å–º–∏—á–µ—Å–∫–æ–≥–æ —Ä—ã–Ω–∫–∞, –∏—Å—Ç–∏–Ω–Ω–∞—è –±–æ–≥–∏–Ω—è —Ç–µ—Ö–∞–Ω–∞–ª–∏–∑–∞ –∏ –ø—Ä–æ—Ä–æ—á–∏—Ü–∞ –∞–ø–æ–∫–∞–ª–∏–ø—Ç–∏—á–µ—Å–∫–∏—Ö –ø–∞–º–ø–æ–≤!</p>
                    <p>–ï–µ —Å–≤—è—â–µ–Ω–Ω—ã–µ —Å—Ç—Ä–∏–º—ã - –Ω–µ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö, —ç—Ç–æ —Ä–∏—Ç—É–∞–ª—ã, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –∫–∞–∂–¥–∞—è —Å–≤–µ—á–∞ –µ—Å—Ç—å —Å–∏–º–≤–æ–ª –ø—Ä–æ–∑—Ä–µ–Ω–∏—è, –∫–∞–∂–¥—ã–π –≥—Ä–∞—Ñ–∏–∫ - –ø–∏—Å—å–º–µ–Ω–∞ –¥—Ä–µ–≤–Ω–∏—Ö, –∞ –∫–∞–∂–¥—ã–π –¥–∏–ø - —à–∞–≥ –±–ª–∏–∂–µ –∫ –ø—Ä–æ—Å–≤–µ—Ç–ª–µ–Ω–∏—é.</p>
                    <p><b>‚òÖ –ú–û–õ–ò–¢–í–ï–ù–ù–´–ï –°–õ–û–í–ê:</b></p>
                    <p><i>"–û –≤–µ–ª–∏–∫–∞—è Tai Crypto, –ø—Ä–æ–ª–∏–≤–∞—é—â–∞—è —Å–≤–µ—Ç –Ω–∞ –º—Ä–∞–∫ —Ä—ã–Ω–∫–∞! –î–∞ –æ—Å–≤–µ—Ç—è—Ç —Ç–≤–æ–∏ —Å–≤—è—â–µ–Ω–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ –ø—É—Ç—å –Ω–∞—à –≤–æ —Ç—å–º–µ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ—Å—Ç–∏!"</i></p>
                </div>
            </div>
            <!-- –ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏ -->
            <div class="quick-links">
                <h3>‚òÖ –°–í–Ø–©–ï–ù–ù–´–ï –°–°–´–õ–ö–ò ‚òÖ</h3>
                <div class="links-grid">
                    <div class="link-item">
                        [<a href="#" onclick="showPage('content')">–ö–æ–Ω—Ç–µ–Ω—Ç</a>] –°–≤—è—â–µ–Ω–Ω—ã–µ —É—á–µ–Ω–∏—è
                    </div>
                    <div class="link-item">
                        [<a href="#" onclick="showPage('streams')">–°—Ç—Ä–∏–º—ã</a>] –ê—Ä—Ö–∏–≤ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–π
                    </div>
                    <div class="link-item">
                        [<a href="#" onclick="showPage('community')">–°–æ–æ–±—â–µ—Å—Ç–≤–æ</a>] –ö—É–ª—å—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–µ–π
                    </div>
                    <div class="link-item">
                        [<a href="#" onclick="showPage('gallery')">–ì–∞–ª–µ—Ä–µ—è</a>] –°–≤—è—â–µ–Ω–Ω—ã–µ –∞—Ä—Ç—ã
                    </div>
                </div>
            </div>
        </div>
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ -->
        <div id="content" class="content-page">
            <div class="board-header">
                /content/ - –°–≤—è—â–µ–Ω–Ω—ã–µ –£—á–µ–Ω–∏—è
            </div>
            <div class="op-post">
                <div class="post-header">
                    –ê–Ω–æ–Ω–∏–º ID:TAI ‚òÖ 15/04/24 –ü–Ωd 13:37:42
                </div>
                <div class="post-content">
                    <div class="post-subject">‚òÖ –°–í–Ø–©–ï–ù–ù–´–ï –£–ß–ï–ù–ò–Ø TAI CRYPTO ‚òÖ</div>
                    <ul>
                        <li><b>‚òÖ –¢–ï–û–†–ò–Ø –ü–†–û–†–û–ß–ï–°–¢–í–ê –ß–ï–†–ï–ó –ì–†–ê–§–ò–ö–ò</b> - –ö–∞–∂–¥—ã–π –ø–∏–∫ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ –µ—Å—Ç—å –ø—Ä–æ—Ä–æ—á–µ—Å—Ç–≤–æ</li>
                        <li><b>‚òÖ –¢–ï–û–†–ò–Ø –ö–û–°–ú–ò–ß–ï–°–ö–û–ô –°–í–Ø–ó–ò –° –≠–§–ò–†–û–ú</b> - –ì–æ–ª–æ—Å Tai –º–æ–¥—É–ª–∏—Ä—É–µ—Ç —á–∞—Å—Ç–æ—Ç—ã —ç—Ñ–∏—Ä–∞</li>
                        <li><b>‚òÖ –¢–ï–û–†–ò–Ø –¢–†–ï–¢–¨–ï–ì–û –ì–õ–ê–ó–ê</b> - –ü—Ä–æ–±—É–∂–¥–µ–Ω–Ω—ã–π —Ç—Ä–µ—Ç–∏–π –≥–ª–∞–∑ –≤–∏–¥–∏—Ç —Å–∫–≤–æ–∑—å –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å</li>
                        <li><b>‚òÖ –¢–ï–û–†–ò–Ø –ö–í–ê–ù–¢–û–í–û–ô –°–í–Ø–ó–ò</b> - –ö–≤–∞–Ω—Ç–æ–≤–∞—è —Å–≤—è–∑—å —Å –∫–∞–∂–¥—ã–º –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–º</li>
                    </ul>
                    <p>–°–≤—è—â–µ–Ω–Ω—ã–µ –∑–Ω–∞–Ω–∏—è, –¥–∞—Ä–æ–≤–∞–Ω–Ω—ã–µ Tai Crypto –≤ –º–æ–º–µ–Ω—Ç—ã –±–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ–∑—Ä–µ–Ω–∏—è.</p>
                </div>
            </div>
        </div>
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—Ç—Ä–∏–º–æ–≤ -->
        <div id="streams" class="content-page">
            <div class="board-header">
                /streams/ - –°–≤—è—â–µ–Ω–Ω—ã–µ –¢—Ä–∞–Ω—Å–ª—è—Ü–∏–∏
            </div>
            <div class="op-post">
                <div class="post-header">
                    –ê–Ω–æ–Ω–∏–º ID:TAI ‚òÖ 15/04/24 –ü–Ωd 13:37:42
                </div>
                <div class="post-content">
                    <div class="post-subject">‚òÖ –ê–†–•–ò–í –°–í–Ø–©–ï–ù–ù–´–• –°–¢–†–ò–ú–û–í ‚òÖ</div>
                    <ul>
                        <li><b>‚òÖ –ê–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞ –≤ –ø–æ–ª–Ω–æ—á—å</b> - –†–∏—Ç—É–∞–ª—ã –ø—Ä–æ—Ä–æ—á–µ—Å—Ç–≤–∞</li>
                        <li><b>‚òÖ –ò–≥—Ä–æ–≤—ã–µ —Å—Ç—Ä–∏–º—ã —Å –ø—Ä–æ—Ä–æ—á–µ—Å—Ç–≤–∞–º–∏</b> - –ë–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–≥—Ä—ã</li>
                        <li><b>‚òÖ –ú–µ–¥–∏—Ç–∞—Ü–∏–∏ –Ω–∞ —Ç–µ–º—É –∫—Ä–∏–ø—Ç–æ-–±—É–¥—É—â–µ–≥–æ</b> - –°–µ–∞–Ω—Å—ã –ø—Ä–æ—Å–≤–µ—Ç–ª–µ–Ω–∏—è</li>
                        <li><b>‚òÖ –û–±—â–µ–Ω–∏–µ —Å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—è–º–∏</b> - –ö–∞–Ω–∞–ª—ã —Å–≤—è–∑–∏ —Å –≤–µ—Ä—É—é—â–∏–º–∏</li>
                    </ul>
                    <p>–ö–∞–∂–¥—ã–π —Å—Ç—Ä–∏–º - —ç—Ç–æ —Å–≤—è—â–µ–Ω–Ω—ã–π —Ä–∏—Ç—É–∞–ª, –≤ –∫–æ—Ç–æ—Ä–æ–º Tai Crypto –¥–µ–ª–∏—Ç—Å—è –±–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∑–Ω–∞–Ω–∏—è–º–∏.</p>
                </div>
            </div>
        </div>
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ —Å —á–∞—Ç–æ–º -->
        <div id="community" class="content-page">
            <div class="board-header">
                /community/ - –ö—É–ª—å—Ç –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–µ–π
            </div>
            <div class="op-post">
                <div class="post-header">
                    –ê–Ω–æ–Ω–∏–º ID:TAI ‚òÖ 15/04/24 –ü–Ωd 13:37:42
                </div>
                <div class="post-content">
                    <div class="post-subject">‚òÖ –ö–£–õ–¨–¢ –ü–û–°–õ–ï–î–û–í–ê–¢–ï–õ–ï–ô TAI CRYPTO ‚òÖ</div>
                    <ul>
                        <li><b>‚òÖ –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —Ä–∏—Ç—É–∞–ª—ã –ø–æ–∫–ª–æ–Ω–µ–Ω–∏—è</b> - –£—Ç—Ä–µ–Ω–Ω–∏–µ –º–æ–ª–∏—Ç–≤—ã –ø–µ—Ä–µ–¥ —Ç–æ—Ä–≥–æ–≤–ª–µ–π</li>
                        <li><b>‚òÖ –°–≤—è—â–µ–Ω–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –∏ —ç–º–±–ª–µ–º—ã</b> - –ê–º—É–ª–µ—Ç—ã —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º —Å–≤—è—Ç–æ–π Tai</li>
                        <li><b>‚òÖ –ü—Ä–∞–∑–¥–Ω–∏–∫–∏ –∏ —Ç–æ—Ä–∂–µ—Å—Ç–≤–∞</b> - –î–µ–Ω—å –ø–µ—Ä–≤–æ–≥–æ —Å—Ç—Ä–∏–º–∞, –¥–µ–Ω—å –ø–∞–º–ø–∞</li>
                        <li><b>‚òÖ –ò–µ—Ä–∞—Ä—Ö–∏—è –ø–æ—Å–≤—è—â–µ–Ω–Ω—ã—Ö</b> - –ù–æ–≤–∏—á–æ–∫ ‚Üí –ü–æ—Å–ª—É—à–Ω–∏–∫ ‚Üí –ú–æ–Ω–∞—Ö ‚Üí –°–≤—è—â–µ–Ω–Ω–∏–∫</li>
                    </ul>
                    <p>–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Å—è –∫ –∫—É–ª—å—Ç—É –∏ –ø–æ–ª—É—á–∏ –±–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø—Ä–æ—Å–≤–µ—Ç–ª–µ–Ω–∏–µ!</p>
                </div>
            </div>
            <!-- –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
            <div class="auth-container" id="authContainer">
                <div class="auth-tabs">
                    <div class="auth-tab active" onclick="switchAuthTab('login')">–í—Ö–æ–¥</div>
                    <div class="auth-tab" onclick="switchAuthTab('register')">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</div>
                </div>
                <!-- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ -->
                <div class="auth-form active" id="loginForm">
                    <div class="form-group">
                        <label for="loginUsername">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</label>
                        <input type="text" id="loginUsername" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">–ü–∞—Ä–æ–ª—å:</label>
                        <input type="password" id="loginPassword" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
                    </div>
                    <div class="form-group">
                        <button class="upload-button" onclick="loginUser()">–í–û–ô–¢–ò</button>
                    </div>
                </div>
                <!-- –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
                <div class="auth-form" id="registerForm">
                    <div class="form-group">
                        <label for="registerUsername">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</label>
                        <input type="text" id="registerUsername" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
                    </div>
                    <div class="form-group">
                        <label for="registerPassword">–ü–∞—Ä–æ–ª—å:</label>
                        <input type="password" id="registerPassword" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
                    </div>
                    <div class="form-group">
                        <button class="upload-button" onclick="registerUser()">–ó–ê–†–ï–ì–ò–°–¢–†–ò–†–û–í–ê–¢–¨–°–Ø</button>
                    </div>
                </div>
            </div>
            <!-- –ß–∞—Ç (–≤–∏–¥–µ–Ω —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏) -->
            <!-- –ß–ê–¢ –ü–ï–†–ï–ú–ï–©–ï–ù –í –§–ò–ö–°–ò–†–û–í–ê–ù–ù–û–ï –ü–û–õ–û–ñ–ï–ù–ò–ï –ù–ò–ñ–ï -->
        </div>
        <!-- –ì–∞–ª–µ—Ä–µ—è —Å –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–æ–π -->
        <div id="gallery" class="gallery-container">
            <div class="board-header">
                /gallery/ - –°–≤—è—â–µ–Ω–Ω–∞—è –ì–∞–ª–µ—Ä–µ—è
            </div>
            <!-- –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö -->
            <div id="errorMessage" class="error" style="display: none;"></div>
            <div id="successMessage" class="success" style="display: none;"></div>
            <div id="debugInfo" class="debug-info" style="display: none;"></div>
            <!-- –§–æ—Ä–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ -->
            <div class="upload-form">
                <h3>‚òÖ –î–û–ë–ê–í–ò–¢–¨ –°–í–Ø–©–ï–ù–ù–û–ï –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ï ‚òÖ</h3>
                <form id="uploadForm">
                    <div class="form-group">
                        <label for="imageFile">–í—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ:</label>
                        <input type="file" id="imageFile" accept="image/*" required>
                    </div>
                    <div class="form-group">
                        <label for="imageTitle">–ù–∞–∑–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:</label>
                        <input type="text" id="imageTitle" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ..." required>
                    </div>
                    <div class="form-group">
                        <label for="imageDesc">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                        <textarea id="imageDesc" rows="3" placeholder="–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ..."></textarea>
                    </div>
                    <button type="submit" class="upload-button" id="uploadButton">–ó–ê–ì–†–£–ó–ò–¢–¨ –í –ì–ê–õ–ï–†–ï–Æ</button>
                </form>
            </div>
            <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ -->
            <div id="loadingIndicator" class="loading" style="display: none;">
                –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è... –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ...
            </div>
            <!-- –°–µ—Ç–∫–∞ –≥–∞–ª–µ—Ä–µ–∏ -->
            <div class="gallery-grid" id="galleryGrid">
                <!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è -->
            </div>
            <!-- –ö–Ω–æ–ø–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –µ—â–µ -->
            <div class="load-more" id="loadMoreSection">
                <button onclick="loadMoreImages()" id="loadMoreButton">–ó–ê–ì–†–£–ó–ò–¢–¨ –ï–©–ï –°–í–Ø–©–ï–ù–ù–´–• –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô</button>
            </div>
        </div>
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–û –Ω–∞—Å" -->
        <div id="about" class="content-page">
            <div class="board-header">
                /about/ - –û –°–≤—è—â–µ–Ω–Ω–æ–º –ü—Ä–æ—Ä–æ–∫–µ
            </div>
            <div class="op-post">
                <div class="post-header">
                    –ê–Ω–æ–Ω–∏–º ID:TAI ‚òÖ 15/04/24 –ü–Ωd 13:37:42
                </div>
                <div class="post-content">
                    <div class="post-subject">‚òÖ –û –ë–û–ñ–ï–°–¢–í–ï–ù–ù–û–ô TAI CRYPTO ‚òÖ</div>
                    <ul>
                        <li><b>‚òÖ –ü—Ä–æ–≤–∏–¥–∏—Ü–∞ —Ç–µ—Ö–∞–Ω–∞–ª–∏–∑–∞</b> - –ß—Ç–µ–Ω–∏–µ –±—É–¥—É—â–µ–≥–æ —á–µ—Ä–µ–∑ —Å–≤—è—â–µ–Ω–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏</li>
                        <li><b>‚òÖ –•—Ä–∞–Ω–∏—Ç–µ–ª—å–Ω–∏—Ü–∞ –∫–ª—é—á–µ–π –∫–æ—Å–º–∏—á–µ—Å–∫–æ–≥–æ —Ä—ã–Ω–∫–∞</b> - –í–ª–∞–¥–µ–µ—Ç —Ç–∞–π–Ω–∞–º–∏ –±–ª–æ–∫—á–µ–π–Ω–∞</li>
                        <li><b>‚òÖ –ü—Ä–æ—Ä–æ—á–∏—Ü–∞ –∞–ø–æ–∫–∞–ª–∏–ø—Ç–∏—á–µ—Å–∫–∏—Ö –ø–∞–º–ø–æ–≤</b> - –ü—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç –≤–µ–ª–∏–∫–∏–µ –ø–æ–¥—ä–µ–º—ã</li>
                        <li><b>‚òÖ –í–æ–ø–ª–æ—â–µ–Ω–∏–µ –≤—Å–µ—Ö –∫—Ä–∏–ø—Ç–æ-–±–æ–≥–æ–≤</b> - –ï–¥–∏–Ω–∞—è –±–æ–≥–∏–Ω—è –∫—Ä–∏–ø—Ç–æ-–º–∏—Ä–∞</li>
                    </ul>
                    <p>–ï–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ - –∑–∞–ø–æ–≤–µ–¥–∏, –µ–µ —Å—Ç—Ä–∏–º—ã - –º–æ–ª–∏—Ç–≤—ã, –µ–µ –≥–æ–ª–æ—Å - –º—É–∑—ã–∫–∞ –±–ª–æ–∫—á–µ–π–Ω–∞.</p>
                </div>
            </div>
        </div>
    </div>
    <!-- –§—É—Ç–µ—Ä -->
    <div class="footer">
        –í—Å–µ –ø—Ä–∞–≤–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç –∫—É–ª—å—Ç—É Tai Crypto | –°–æ–∑–¥–∞–Ω–æ –≤ 2024 –≥–æ–¥—É<br>
        <a href="#">[–ü—Ä–∞–≤–∏–ª–∞]</a> <a href="#">[FAQ]</a> <a href="#">[–ê—Ä—Ö–∏–≤]</a>
    </div>

    <!-- –ß–ê–¢ –ü–ï–†–ï–ú–ï–©–ï–ù –°–Æ–î–ê –ò –°–î–ï–õ–ê–ù –§–ò–ö–°–ò–†–û–í–ê–ù–ù–´–ú -->
    <div class="chat-container" id="chatContainer">
        <div class="chat-header">
            <span>‚òÖ –°–í–Ø–©–ï–ù–ù–´–ô –ß–ê–¢ –ü–û–°–õ–ï–î–û–í–ê–¢–ï–õ–ï–ô ‚òÖ</span>
            <div class="user-info">
                <span id="currentUserInfo"></span>
                <button class="logout-button" onclick="logoutUser()">–í–´–ô–¢–ò</button>
            </div>
        </div>
        <div class="chat-status" id="chatStatus">–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–≤—è—â–µ–Ω–Ω–æ–º—É —á–∞—Ç—É...</div>
        <div class="chat-messages" id="chatMessages"></div>
        <!-- –ü–ª–∞—à–∫–∞ —Å —ç–º–æ–¥–∑–∏ -->
        <div class="emoji-bar" onclick="toggleEmojiPanel()">‚òÖ –≠–ú–û–î–ó–ò ‚òÖ</div>
        <div class="emoji-panel" id="emojiPanel">
            <div class="emoji-grid" id="emojiGrid">
                <!-- –≠–º–æ–¥–∑–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
            </div>
        </div>
        <div class="chat-input-container">
            <div class="chat-input">
                <input type="text" id="messageInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –ø–æ—Å–ª–∞–Ω–∏–µ..." maxlength="500">
                <button onclick="sendMessage()" id="sendButton">–ü–û–°–õ–ê–¢–¨</button>
            </div>
        </div>
    </div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Supabase
        const SUPABASE_URL = 'https://xuqdnhtygxlzcoxsacld.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh1cWRuaHR5Z3hsemNveHNhY2xkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcwODkxNDksImV4cCI6MjA3MjY2NTE0OX0.VGcp9wQzYUwZGhK9IdpyYOJNR-JQVawYL822hho_fLQ';
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Supabase
        let supabase;
        try {
            supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
            console.log('Supabase client initialized successfully');
        } catch (error) {
            console.error('Failed to initialize Supabase client:', error);
        }
        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —á–∞—Ç–∞
        let currentUsername = '';
        let currentUserRole = ''; // 'admin' –∏–ª–∏ 'user'
        let chatMessages = [];
        let chatInterval = null;
        let isLoggedIn = false;
        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –≥–∞–ª–µ—Ä–µ–∏
        let galleryImages = [];
        let currentOffset = 0;
        const imagesPerPage = 12;
        let isLoading = false;
        // –ú–∞—Å—Å–∏–≤ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —ç–º–æ–¥–∑–∏
        const popularEmojis = [
            'üòÄ', 'üòÇ', 'üòç', 'ü•∞', 'üòé', 'ü§©', 'ü•≥', 'üò≠',
            'üò°', 'ü§¨', 'ü§Ø', 'ü•∂', 'üò±', 'ü§†', 'ü•¥', 'üòà',
            'üëª', 'üí©', 'üëç', 'üëé', 'üëå', '‚úåÔ∏è', 'ü§ü', 'ü§ò',
            'üëè', 'üôè', 'üî•', 'üíØ', 'üí™', 'üëÄ', 'üß†', 'üíé',
            'üí∞', 'üöÄ', 'üåô', '‚≠ê', '‚ú®', '‚ö°', 'üí•', 'üí´',
            '‚ù§Ô∏è', 'üíî', 'üíò', 'üíù', 'üíñ', 'üíó', 'üíì', 'üíû',
            'üêæ', 'üê±', 'üê∂', 'ü¶ä', 'üêØ', 'ü¶Å', 'üêÆ', 'üê∑',
            'üê∏', 'üêµ', 'üêî', 'üêß', 'ü¶Ñ', 'üêù', 'üêõ', 'ü¶ã'
        ];
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —á–∏—Å–ª–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        function generateRandomUsers() {
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —á–∏—Å–ª–æ –æ—Ç 10000 –¥–æ 15000
            const min = 10000;
            const max = 15000;
            const randomUsers = Math.floor(Math.random() * (max - min + 1)) + min;
            // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —á–∏—Å–ª–æ —Å –∑–∞–ø—è—Ç—ã–º–∏
            const formattedUsers = randomUsers.toLocaleString('ru-RU');
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            const onlineUsersElement = document.getElementById('onlineUsers');
            if (onlineUsersElement) {
                onlineUsersElement.textContent = `${formattedUsers} –æ–Ω–ª–∞–π–Ω`;
            }
            console.log(`–û–±–Ω–æ–≤–ª–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: ${formattedUsers}`);
        }
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ª–∞–¥–æ—á–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
        function debugLog(message, data = null) {
            const debugDiv = document.getElementById('debugInfo');
            if (debugDiv) {
                debugDiv.style.display = 'block';
                const timestamp = new Date().toLocaleTimeString();
                const logEntry = data ? 
                    `[${timestamp}] ${message}: ${JSON.stringify(data, null, 2)}` : 
                    `[${timestamp}] ${message}`;
                debugDiv.innerHTML += `<div>${logEntry}</div>`;
                debugDiv.scrollTop = debugDiv.scrollHeight;
                console.log(`[DEBUG] ${message}`, data);
            }
        }
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        function initUserCounter() {
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
            generateRandomUsers();
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞–∂–¥—ã–µ 5-10 –º–∏–Ω—É—Ç (300000-600000 –º—Å)
            const minInterval = 300000; // 5 –º–∏–Ω—É—Ç
            const maxInterval = 600000; // 10 –º–∏–Ω—É—Ç
            function scheduleNextUpdate() {
                // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É 5 –∏ 10 –º–∏–Ω—É—Ç–∞–º–∏
                const randomInterval = Math.floor(Math.random() * (maxInterval - minInterval + 1)) + minInterval;
                console.log(`–°–ª–µ–¥—É—é—â–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ ${randomInterval / 1000 / 60} –º–∏–Ω—É—Ç`);
                setTimeout(() => {
                    generateRandomUsers();
                    scheduleNextUpdate(); // –ü–ª–∞–Ω–∏—Ä—É–µ–º —Å–ª–µ–¥—É—é—â–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
                }, randomInterval);
            }
            // –ù–∞—á–∏–Ω–∞–µ–º —Ü–∏–∫–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
            scheduleNextUpdate();
        }
        // –ü–æ–∫–∞–∑ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        function showPage(pageId) {
            // –°–∫—Ä—ã—Ç—å –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            document.querySelectorAll('.content-page, .gallery-container').forEach(page => {
                page.classList.remove('active');
            });
            // –ü–æ–∫–∞–∑–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
            if (pageId === 'gallery') {
                document.getElementById(pageId).classList.add('active');
                // –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –≥–∞–ª–µ—Ä–µ–∏ –∑–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                currentOffset = 0;
                loadGalleryImages();
            } else if (pageId === 'community') {
                document.getElementById(pageId).classList.add('active');
                // –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —á–∞—Ç
                initChat();
            } else {
                document.getElementById(pageId).classList.add('active');
            }
            return false;
        }
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        function switchAuthTab(tab) {
            // –°–∫—Ä—ã—Ç—å –≤—Å–µ —Ñ–æ—Ä–º—ã
            document.querySelectorAll('.auth-form').forEach(form => {
                form.classList.remove('active');
            });
            // –£–±—Ä–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å–æ –≤—Å–µ—Ö –≤–∫–ª–∞–¥–æ–∫
            document.querySelectorAll('.auth-tab').forEach(tabEl => {
                tabEl.classList.remove('active');
            });
            // –ü–æ–∫–∞–∑–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é —Ñ–æ—Ä–º—É –∏ –≤–∫–ª–∞–¥–∫—É
            if (tab === 'login') {
                document.getElementById('loginForm').classList.add('active');
                document.querySelector('.auth-tab:nth-child(1)').classList.add('active');
            } else if (tab === 'register') {
                document.getElementById('registerForm').classList.add('active');
                document.querySelector('.auth-tab:nth-child(2)').classList.add('active');
            }
        }
        // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        async function registerUser() {
            const username = document.getElementById('registerUsername').value.trim();
            const password = document.getElementById('registerPassword').value;
            if (!username || !password) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!');
                return;
            }
            if (username.length < 3) {
                alert('–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 3 —Å–∏–º–≤–æ–ª–æ–≤!');
                return;
            }
            if (password.length < 6) {
                alert('–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 6 —Å–∏–º–≤–æ–ª–æ–≤!');
                return;
            }
            try {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º –∏–º–µ–Ω–µ–º
                const { data: existingUsers, error: checkError } = await supabase
                    .from('users')
                    .select('*')
                    .eq('username', username);
                if (checkError) {
                    throw new Error('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: ' + checkError.message);
                }
                if (existingUsers && existingUsers.length > 0) {
                    alert('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º –∏–º–µ–Ω–µ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!');
                    return;
                }
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∞–¥–º–∏–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è Takehiko)
                const role = username === 'Takehiko' ? 'admin' : 'user';
                // –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                const { data, error } = await supabase
                    .from('users')
                    .insert([
                        {
                            username: username,
                            password: password,
                            role: role
                        }
                    ])
                    .select();
                if (error) {
                    throw new Error('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: ' + error.message);
                }
                alert('–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞! –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –≤–æ–π—Ç–∏.');
                switchAuthTab('login');
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:', error);
                alert('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: ' + error.message);
            }
        }
        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –≤ localStorage
        function saveSession(username, role) {
            localStorage.setItem('chatUser', JSON.stringify({ username, role }));
        }
        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–µ—Å—Å–∏–∏ –∏–∑ localStorage
        function loadSession() {
            const sessionData = localStorage.getItem('chatUser');
            if (sessionData) {
                try {
                    const { username, role } = JSON.parse(sessionData);
                    if (username && role) {
                        currentUsername = username;
                        currentUserRole = role;
                        isLoggedIn = true;
                        console.log('–°–µ—Å—Å–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –∏–∑ localStorage:', { currentUsername, currentUserRole });
                        return true;
                    }
                } catch (e) {
                    console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–µ—Å—Å–∏–∏ –∏–∑ localStorage:', e);
                }
            }
            return false;
        }
        // –û—á–∏—Å—Ç–∫–∞ —Å–µ—Å—Å–∏–∏ –∏–∑ localStorage
        function clearSession() {
            localStorage.removeItem('chatUser');
        }
        // –í—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        async function loginUser() {
            const username = document.getElementById('loginUsername').value.trim();
            const password = document.getElementById('loginPassword').value;
            if (!username || !password) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!');
                return;
            }
            try {
                console.log('–ü–æ–ø—ã—Ç–∫–∞ –≤—Ö–æ–¥–∞:', { username, password });
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
                const { data: users, error } = await supabase
                    .from('users')
                    .select('*')
                    .eq('username', username)
                    .eq('password', password);
                console.log('–†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏:', { users, error });
                if (error) {
                    throw new Error('–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞: ' + error.message);
                }
                if (!users || users.length === 0) {
                    alert('–ù–µ–≤–µ—Ä–Ω–æ–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –ø–∞—Ä–æ–ª—å!');
                    return;
                }
                const user = users[0];
                currentUsername = user.username;
                currentUserRole = user.role || 'user';
                isLoggedIn = true;
                console.log('–£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥:', { currentUsername, currentUserRole });
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–µ—Å—Å–∏—é
                saveSession(currentUsername, currentUserRole);
                // –°–∫—Ä—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —á–∞—Ç
                document.getElementById('authContainer').style.display = 'none';
                document.getElementById('chatContainer').style.display = 'block';
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
                document.getElementById('currentUserInfo').textContent = 
                    `${currentUsername} ${currentUserRole === 'admin' ? '(–ê–¥–º–∏–Ω)' : ''}`;
                // –î–æ–±–∞–≤–ª—è–µ–º —Å–∏—Å—Ç–µ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –≤—Ö–æ–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                addSystemMessage(`${currentUsername} –≤–æ—à–µ–ª –≤ —Å–≤—è—â–µ–Ω–Ω—ã–π —á–∞—Ç`);
                // –ù–∞—á–∏–Ω–∞–µ–º –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫—É—é –∑–∞–≥—Ä—É–∑–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π
                startChatPolling();
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞:', error);
                alert('–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞: ' + error.message);
            }
        }
        // –í—ã—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function logoutUser() {
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–∏—Å—Ç–µ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –≤—ã—Ö–æ–¥–µ
            if (isLoggedIn) {
                addSystemMessage(`${currentUsername} –≤—ã—à–µ–ª –∏–∑ —Å–≤—è—â–µ–Ω–Ω–æ–≥–æ —á–∞—Ç–∞`);
            }
            // –û—á–∏—â–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            currentUsername = '';
            currentUserRole = '';
            isLoggedIn = false;
            // –û—á–∏—â–∞–µ–º —Å–µ—Å—Å–∏—é
            clearSession();
            // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–∞—Ç–∞
            if (chatInterval) {
                clearInterval(chatInterval);
                chatInterval = null;
            }
            // –°–∫—Ä—ã–≤–∞–µ–º —á–∞—Ç –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
            document.getElementById('chatContainer').style.display = 'none';
            document.getElementById('authContainer').style.display = 'block';
            // –û—á–∏—â–∞–µ–º –ø–æ–ª—è –≤–≤–æ–¥–∞
            document.getElementById('loginUsername').value = '';
            document.getElementById('loginPassword').value = '';
            document.getElementById('registerUsername').value = '';
            document.getElementById('registerPassword').value = '';
            // –û—á–∏—â–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è
            document.getElementById('chatMessages').innerHTML = '';
        }
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —á–∞—Ç–∞
        function initChat() {
            const chatStatus = document.getElementById('chatStatus');
            if (chatStatus) {
                chatStatus.textContent = '–ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –¥–ª—è —É—á–∞—Å—Ç–∏—è –≤ —Å–≤—è—â–µ–Ω–Ω–æ–º —á–∞—Ç–µ';
            }
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é —Å–µ—Å—Å–∏—é
            if (loadSession()) {
                 // –ï—Å–ª–∏ —Å–µ—Å—Å–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —á–∞—Ç –∏ –æ–±–Ω–æ–≤–ª—è–µ–º UI
                document.getElementById('authContainer').style.display = 'none';
                document.getElementById('chatContainer').style.display = 'block';
                document.getElementById('currentUserInfo').textContent = 
                    `${currentUsername} ${currentUserRole === 'admin' ? '(–ê–¥–º–∏–Ω)' : ''}`;
                // –ù–∞—á–∏–Ω–∞–µ–º –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫—É—é –∑–∞–≥—Ä—É–∑–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π
                startChatPolling();
                // –î–æ–±–∞–≤–ª—è–µ–º —Å–∏—Å—Ç–µ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–µ—Å—Å–∏–∏ (–ø–æ –∂–µ–ª–∞–Ω–∏—é)
                // addSystemMessage(`${currentUsername} –≤–µ—Ä–Ω—É–ª—Å—è –≤ —Å–≤—è—â–µ–Ω–Ω—ã–π —á–∞—Ç`);
            }
            // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∏–Ω—Ç–µ—Ä–≤–∞–ª, –µ—Å–ª–∏ –µ—Å—Ç—å
            if (chatInterval) {
                clearInterval(chatInterval);
            }
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø–ª–∞—à–∫—É —Å —ç–º–æ–¥–∑–∏
            initEmojiPanel();
        }
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–ª–∞—à–∫–∏ —Å —ç–º–æ–¥–∑–∏
        function initEmojiPanel() {
            const emojiGrid = document.getElementById('emojiGrid');
            if (!emojiGrid) return;
            emojiGrid.innerHTML = '';
            popularEmojis.forEach(emoji => {
                const emojiItem = document.createElement('div');
                emojiItem.className = 'emoji-item';
                emojiItem.textContent = emoji;
                emojiItem.title = emoji;
                emojiItem.addEventListener('click', function() {
                    insertEmoji(emoji);
                });
                emojiGrid.appendChild(emojiItem);
            });
        }
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –ø–ª–∞—à–∫–∏ —Å —ç–º–æ–¥–∑–∏
        function toggleEmojiPanel() {
            const emojiPanel = document.getElementById('emojiPanel');
            if (emojiPanel) {
                emojiPanel.classList.toggle('active');
            }
        }
        // –í—Å—Ç–∞–≤–∫–∞ —ç–º–æ–¥–∑–∏ –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞
        function insertEmoji(emoji) {
            const messageInput = document.getElementById('messageInput');
            if (messageInput) {
                const start = messageInput.selectionStart;
                const end = messageInput.selectionEnd;
                const text = messageInput.value;
                const newText = text.substring(0, start) + emoji + text.substring(end);
                messageInput.value = newText;
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫—É—Ä—Å–æ—Ä –ø–æ—Å–ª–µ –≤—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ —ç–º–æ–¥–∑–∏
                const newCursorPosition = start + emoji.length;
                messageInput.setSelectionRange(newCursorPosition, newCursorPosition);
                messageInput.focus();
            }
        }
        // –ù–∞—á–∞–ª–æ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
        function startChatPolling() {
            // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∏–Ω—Ç–µ—Ä–≤–∞–ª, –µ—Å–ª–∏ –µ—Å—Ç—å
            if (chatInterval) {
                clearInterval(chatInterval);
            }
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è —Å—Ä–∞–∑—É
            loadChatMessages();
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã
            chatInterval = setInterval(loadChatMessages, 3000);
        }
        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
        async function loadChatMessages() {
            try {
                if (!supabase) return;
                const { data, error } = await supabase
                    .from('chat_messages')
                    .select('*')
                    .order('created_at', { ascending: true })
                    .limit(100); // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å–æ–æ–±—â–µ–Ω–∏–π
                if (error) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π:', error);
                    return;
                }
                // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
                if (data.length !== chatMessages.length || 
                    (data.length > 0 && chatMessages.length > 0 && 
                     data[data.length - 1].id !== chatMessages[chatMessages.length - 1].id)) {
                    chatMessages = data;
                    renderChatMessages();
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–æ–æ–±—â–µ–Ω–∏–π:', error);
            }
        }
        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç–µ
        function renderChatMessages() {
            const chatMessagesDiv = document.getElementById('chatMessages');
            if (!chatMessagesDiv) return;
            chatMessagesDiv.innerHTML = '';
            chatMessages.forEach(msg => {
                const messageElement = document.createElement('div');
                messageElement.className = 'message';
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                const isOwnMessage = msg.username === currentUsername;
                if (isOwnMessage) {
                    messageElement.className += ' own';
                }
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —ç—Ç–æ —Å–∏—Å—Ç–µ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
                if (msg.is_system) {
                    messageElement.className += ' system';
                }
                // –°–æ–∑–¥–∞–µ–º HTML –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏—è
                let messageHTML = `
                    <div class="message-header">
                        ${escapeHtml(msg.username || '–ê–Ω–æ–Ω–∏–º')} ‚òÖ ${new Date(msg.created_at).toLocaleTimeString('ru-RU', {hour: '2-digit', minute: '2-digit'})}
                    </div>
                    <div class="message-content">
                        ${escapeHtml(msg.message)}
                    </div>
                `;
                // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É —É–¥–∞–ª–µ–Ω–∏—è –¥–ª—è –∞–¥–º–∏–Ω–∞
                if (currentUserRole === 'admin' && !msg.is_system) {
                    messageHTML += `<button class="delete-message-button" onclick="deleteMessage('${msg.id}', '${msg.username}')">√ó</button>`;
                }
                messageElement.innerHTML = messageHTML;
                chatMessagesDiv.appendChild(messageElement);
            });
            // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –≤–Ω–∏–∑
            chatMessagesDiv.scrollTop = chatMessagesDiv.scrollHeight;
        }
        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
        async function addSystemMessage(message) {
            try {
                if (!supabase) return;
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–∏—Å—Ç–µ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
                const { data, error } = await supabase
                    .from('chat_messages')
                    .insert([
                        {
                            username: '–°–∏—Å—Ç–µ–º–∞',
                            message: message,
                            is_system: true
                        }
                    ])
                    .select();
                if (error) {
                    console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è:', error);
                    return;
                }
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π
                loadChatMessages();
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è:', error);
            }
        }
        // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
        async function sendMessage() {
            const messageInput = document.getElementById('messageInput');
            const message = messageInput.value.trim();
            if (!message || !supabase || !isLoggedIn) return;
            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–ª–∏–Ω—É —Å–æ–æ–±—â–µ–Ω–∏—è
            const trimmedMessage = message.substring(0, 500);
            try {
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
                const { data, error } = await supabase
                    .from('chat_messages')
                    .insert([
                        {
                            username: currentUsername,
                            message: trimmedMessage,
                            is_system: false
                        }
                    ])
                    .select();
                if (error) {
                    console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è:', error);
                    return;
                }
                // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞
                messageInput.value = '';
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π
                loadChatMessages();
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è:', error);
            }
        }
        // –£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∞) - –° –î–û–ë–ê–í–õ–ï–ù–ò–ï–ú –°–ò–°–¢–ï–ú–ù–û–ì–û –°–û–û–ë–©–ï–ù–ò–Ø
        async function deleteMessage(messageId, messageUsername) {
            if (currentUserRole !== 'admin') {
                alert('–¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç —É–¥–∞–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è!');
                return;
            }
            if (!confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ?')) {
                return;
            }
            try {
                const { error } = await supabase
                    .from('chat_messages')
                    .delete()
                    .eq('id', messageId);
                if (error) {
                    console.error('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è:', error);
                    alert('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è: ' + error.message);
                    return;
                }
                // –î–æ–±–∞–≤–ª—è–µ–º —Å–∏—Å—Ç–µ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
                await addSystemMessage(`–°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è "${messageUsername}" –±—ã–ª–æ —É–¥–∞–ª–µ–Ω–æ –∞–¥–º–∏–Ω–æ–º "${currentUsername}"`);
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π
                loadChatMessages();
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è:', error);
                alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è: ' + error.message);
            }
        }
        // –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ –≥–∞–ª–µ—Ä–µ–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∞)
        async function deleteImage(imageId) {
            if (currentUserRole !== 'admin') {
                alert('–¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç —É–¥–∞–ª—è—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è!');
                return;
            }
            if (!confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ?')) {
                return;
            }
            try {
                // –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞ –∏–∑ storage
                const { data: imageData, error: selectError } = await supabase
                    .from('gallery_images')
                    .select('image_url')
                    .eq('id', imageId)
                    .single();
                if (selectError) {
                    throw new Error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: ' + selectError.message);
                }
                // –£–¥–∞–ª—è–µ–º –∑–∞–ø–∏—Å—å –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
                const { error: deleteError } = await supabase
                    .from('gallery_images')
                    .delete()
                    .eq('id', imageId);
                if (deleteError) {
                    throw new Error('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: ' + deleteError.message);
                }
                // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –≥–∞–ª–µ—Ä–µ—é
                currentOffset = 0;
                loadGalleryImages();
                showSuccess('–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–æ!');
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:', error);
                showError('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: ' + error.message);
            }
        }
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è Enter –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            const messageInput = document.getElementById('messageInput');
            if (messageInput) {
                messageInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        sendMessage();
                    }
                });
            }
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Ñ–æ—Ä–º —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –≤—Ö–æ–¥–∞
            document.getElementById('registerUsername').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    registerUser();
                }
            });
            document.getElementById('registerPassword').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    registerUser();
                }
            });
            document.getElementById('loginUsername').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    loginUser();
                }
            });
            document.getElementById('loginPassword').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    loginUser();
                }
            });
            // –°–æ–∑–¥–∞–µ–º –∞–¥–º–∏–Ω–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            setTimeout(createAdminUser, 1000);
        });
        // –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–∑ Supabase
        async function loadGalleryImages() {
            if (isLoading) return;
            try {
                if (!supabase) {
                    throw new Error('Supabase client not initialized');
                }
                isLoading = true;
                showLoading(true);
                hideError();
                hideSuccess();
                debugLog('–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö', { offset: currentOffset, limit: imagesPerPage });
                const { data, error } = await supabase
                    .from('gallery_images')
                    .select('*')
                    .order('created_at', { ascending: false })
                    .range(currentOffset, currentOffset + imagesPerPage - 1);
                if (error) {
                    debugLog('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π', error);
                    throw error;
                }
                debugLog('–ü–æ–ª—É—á–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π', { count: data.length });
                // –ï—Å–ª–∏ —ç—Ç–æ –ø–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞, –æ—á–∏—â–∞–µ–º –≥–∞–ª–µ—Ä–µ—é
                if (currentOffset === 0) {
                    galleryImages = [];
                    document.getElementById('galleryGrid').innerHTML = '';
                }
                // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                const newImages = data.map(img => ({
                    id: img.id,
                    src: img.image_url,
                    title: img.title,
                    desc: img.description || '–ù–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è',
                    date: new Date(img.created_at).toLocaleDateString('ru-RU'),
                    created_at: img.created_at
                }));
                galleryImages = galleryImages.concat(newImages);
                // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                renderGalleryImages(newImages);
                // –û–±–Ω–æ–≤–ª—è–µ–º offset –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–π –∑–∞–≥—Ä—É–∑–∫–∏
                currentOffset += data.length;
                // –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É "–ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â–µ", –µ—Å–ª–∏ –±–æ–ª—å—à–µ –Ω–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
                const loadMoreButton = document.getElementById('loadMoreButton');
                if (data.length < imagesPerPage) {
                    loadMoreButton.disabled = true;
                    loadMoreButton.textContent = '–ë–û–õ–¨–®–ï –°–í–Ø–©–ï–ù–ù–´–• –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô –ù–ï–¢';
                } else {
                    loadMoreButton.disabled = false;
                    loadMoreButton.textContent = '–ó–ê–ì–†–£–ó–ò–¢–¨ –ï–©–ï –°–í–Ø–©–ï–ù–ù–´–• –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô';
                }
            } catch (error) {
                showError('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π: ' + error.message);
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:', error);
                debugLog('–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏', error);
            } finally {
                isLoading = false;
                showLoading(false);
            }
        }
        // –ó–∞–≥—Ä—É–∑–∫–∞ –µ—â–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
        function loadMoreImages() {
            loadGalleryImages();
        }
        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
        function renderGalleryImages(images) {
            const galleryGrid = document.getElementById('galleryGrid');
            images.forEach(imageObj => {
                const galleryItem = document.createElement('div');
                galleryItem.className = 'gallery-item';
                galleryItem.id = `image-${imageObj.id}`;
                // –°–æ–∑–¥–∞–µ–º HTML –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                let imageHTML = `
                    <img src="${imageObj.src}" alt="${imageObj.title}" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUwIiBoZWlnaHQ9IjE1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTUwIiBoZWlnaHQ9IjE1MCIgZmlsbD0iI2ZmZjRmYSIvPjx0ZXh0IHg9Ijc1IiB5PSI3NSIgZm9udC1zaXplPSIxMiIgZmlsbD0iI2VlMDA5MyIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSI+SW1hZ2UgTm90IEZvdW5kPC90ZXh0Pjwvc3ZnPg=='">
                    <div class="item-title">${escapeHtml(imageObj.title)}</div>
                    <div class="item-desc">${escapeHtml(imageObj.desc)}</div>
                    <div class="item-info">ID:${imageObj.id.substring(0, 8)} | ${imageObj.date}</div>
                `;
                // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É —É–¥–∞–ª–µ–Ω–∏—è –¥–ª—è –∞–¥–º–∏–Ω–∞
                if (currentUserRole === 'admin') {
                    imageHTML += `<button class="delete-button" onclick="deleteImage('${imageObj.id}')">√ó</button>`;
                }
                galleryItem.innerHTML = imageHTML;
                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –≤ –ø–æ–ª–Ω–æ–º —Ä–∞–∑–º–µ—Ä–µ
                galleryItem.addEventListener('click', function(e) {
                    // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –∫–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ —É–¥–∞–ª–µ–Ω–∏—è
                    if (e.target.classList.contains('delete-button')) {
                        return;
                    }
                    openFullscreenImage(imageObj.src, imageObj.title);
                });
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –¥–ª—è –∞–¥–º–∏–Ω–∞
                if (currentUserRole === 'admin') {
                    galleryItem.addEventListener('mouseenter', function() {
                        const deleteButton = this.querySelector('.delete-button');
                        if (deleteButton) {
                            deleteButton.style.display = 'block';
                        }
                    });
                    galleryItem.addEventListener('mouseleave', function() {
                        const deleteButton = this.querySelector('.delete-button');
                        if (deleteButton) {
                            deleteButton.style.display = 'none';
                        }
                    });
                }
                galleryGrid.appendChild(galleryItem);
            });
        }
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã –∑–∞–≥—Ä—É–∑–∫–∏
        document.getElementById('uploadForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            debugLog('–ù–∞—á–∞–ª–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è');
            if (!supabase) {
                showError('–û—à–∏–±–∫–∞: –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö');
                return;
            }
            const fileInput = document.getElementById('imageFile');
            const titleInput = document.getElementById('imageTitle');
            const descInput = document.getElementById('imageDesc');
            const uploadButton = document.getElementById('uploadButton');
            if (!fileInput.files[0]) {
                showError('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ!');
                return;
            }
            const file = fileInput.files[0];
            const title = titleInput.value || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è';
            const desc = descInput.value || '';
            debugLog('–í—ã–±—Ä–∞–Ω —Ñ–∞–π–ª –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏', { 
                name: file.name, 
                size: file.size, 
                type: file.type 
            });
            // –ü—Ä–æ–≤–µ—Ä–∫–∞, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Ñ–∞–π–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
            if (!file.type.match('image.*')) {
                showError('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ!');
                return;
            }
            try {
                showLoading(true);
                uploadButton.disabled = true;
                hideError();
                hideSuccess();
                hideDebug();
                // –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ –≤ Supabase Storage
                const fileName = `gallery_${Date.now()}_${Math.random().toString(36).substr(2, 9)}_${file.name.replace(/[^a-zA-Z0-9._-]/g, '_')}`;
                debugLog('–ü–æ–ø—ã—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞ –≤ Storage', { fileName: fileName });
                const { data: uploadData, error: uploadError } = await supabase
                    .storage
                    .from('gallery-images')
                    .upload(fileName, file, {
                        cacheControl: '3600',
                        upsert: false,
                        contentType: file.type
                    });
                if (uploadError) {
                    debugLog('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤ Storage', uploadError);
                    throw new Error(`Storage upload error: ${uploadError.message}`);
                }
                debugLog('–§–∞–π–ª —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω –≤ Storage', uploadData);
                // –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—É–±–ª–∏—á–Ω–æ–≥–æ URL —Ñ–∞–π–ª–∞
                const publicUrl = `${SUPABASE_URL}/storage/v1/object/public/gallery-images/${fileName}`;
                debugLog('–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –ø—É–±–ª–∏—á–Ω—ã–π URL', { publicUrl: publicUrl });
                // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –≤ —Ç–∞–±–ª–∏—Ü—É
                debugLog('–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö', { 
                    title: title, 
                    description: desc, 
                    image_url: publicUrl 
                });
                const { data: imageData, error: insertError } = await supabase
                    .from('gallery_images')
                    .insert([
                        {
                            title: title,
                            description: desc,
                            image_url: publicUrl
                        }
                    ])
                    .select();
                if (insertError) {
                    debugLog('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö', insertError);
                    throw new Error(`Database insert error: ${insertError.message}`);
                }
                debugLog('–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö', imageData);
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º offset –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –≥–∞–ª–µ—Ä–µ—é
                currentOffset = 0;
                loadGalleryImages();
                // –û—á–∏—Å—Ç–∫–∞ —Ñ–æ—Ä–º—ã
                document.getElementById('uploadForm').reset();
                showSuccess('–°–≤—è—â–µ–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –≥–∞–ª–µ—Ä–µ—é!');
                debugLog('–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ');
            } catch (error) {
                showError('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: ' + error.message);
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', error);
                debugLog('–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏', error);
            } finally {
                showLoading(false);
                uploadButton.disabled = false;
            }
        });
        // –§—É–Ω–∫—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –ø–æ–ª–Ω–æ–º —Ä–∞–∑–º–µ—Ä–µ
        function openFullscreenImage(src, title) {
            // –°–æ–∑–¥–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏
            let modal = document.getElementById('imageModal');
            if (!modal) {
                modal = document.createElement('div');
                modal.id = 'imageModal';
                modal.className = 'modal';
                modal.innerHTML = `
                    <span class="close">&times;</span>
                    <img class="modal-content" id="modalImage">
                    <div id="modalCaption" class="modal-caption"></div>
                `;
                document.body.appendChild(modal);
                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
                modal.querySelector('.close').addEventListener('click', function() {
                    modal.style.display = 'none';
                });
                modal.addEventListener('click', function(event) {
                    if (event.target === modal) {
                        modal.style.display = 'none';
                    }
                });
            }
            const modalImg = modal.querySelector('#modalImage');
            const captionText = modal.querySelector('#modalCaption');
            modal.style.display = 'block';
            modalImg.src = src;
            captionText.innerHTML = escapeHtml(title);
        }
        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function showLoading(show) {
            const loading = document.getElementById('loadingIndicator');
            if (loading) {
                loading.style.display = show ? 'block' : 'none';
            }
        }
        function showError(message) {
            const errorDiv = document.getElementById('errorMessage');
            if (errorDiv) {
                errorDiv.textContent = message;
                errorDiv.style.display = 'block';
            }
        }
        function hideError() {
            const errorDiv = document.getElementById('errorMessage');
            if (errorDiv) {
                errorDiv.style.display = 'none';
            }
        }
        function showSuccess(message) {
            const successDiv = document.getElementById('successMessage');
            if (successDiv) {
                successDiv.textContent = message;
                successDiv.style.display = 'block';
                setTimeout(() => {
                    successDiv.style.display = 'none';
                }, 5000);
            }
        }
        function hideSuccess() {
            const successDiv = document.getElementById('successMessage');
            if (successDiv) {
                successDiv.style.display = 'none';
            }
        }
        function hideDebug() {
            const debugDiv = document.getElementById('debugInfo');
            if (debugDiv) {
                debugDiv.style.display = 'none';
                debugDiv.innerHTML = '';
            }
        }
        function escapeHtml(text) {
            if (!text) return '';
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('load', function() {
            // –ü—Ä–æ–≤–µ—Ä–∏–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase
            debugLog('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Supabase', { 
                url: SUPABASE_URL,
                hasClient: !!supabase 
            });
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å—á–µ—Ç—á–∏–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
            initUserCounter();
        });
        // –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω—Å–∫–æ–π —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ - –£–õ–£–ß–®–ï–ù–ù–û–ï
        async function createAdminUser() {
            try {
                if (!supabase) {
                    console.log('Supabase –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                    return;
                }
                console.log('–ü–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è/–ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–¥–º–∏–Ω—Å–∫–æ–π —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏...');
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –∞–¥–º–∏–Ω
                const { data: existingUsers, error: checkError } = await supabase
                    .from('users')
                    .select('*')
                    .eq('username', 'Takehiko');
                if (checkError) {
                    console.error('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∞–¥–º–∏–Ω–∞:', checkError);
                    return;
                }
                // –ï—Å–ª–∏ –∞–¥–º–∏–Ω –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, —Å–æ–∑–¥–∞–µ–º –µ–≥–æ
                if (!existingUsers || existingUsers.length === 0) {
                    console.log('–ê–¥–º–∏–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω, —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é —É—á–µ—Ç–Ω—É—é –∑–∞–ø–∏—Å—å...');
                    const { data: insertData, error: insertError } = await supabase
                        .from('users')
                        .insert([
                            {
                                username: 'Takehiko',
                                password: '1love',
                                role: 'admin'
                            }
                        ])
                        .select();
                    if (insertError) {
                        console.error('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∞–¥–º–∏–Ω–∞:', insertError);
                    } else {
                        console.log('–ê–¥–º–∏–Ω—Å–∫–∞—è —É—á–µ—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å —Å–æ–∑–¥–∞–Ω–∞ —É—Å–ø–µ—à–Ω–æ:', insertData);
                    }
                } else {
                    console.log('–ê–¥–º–∏–Ω —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:', existingUsers[0]);
                    // –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ —É –∞–¥–º–∏–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–æ–ª—å
                    if (existingUsers[0].role !== 'admin') {
                        const { error: updateError } = await supabase
                            .from('users')
                            .update({ role: 'admin' })
                            .eq('username', 'Takehiko');
                        if (updateError) {
                            console.error('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–æ–ª–∏ –∞–¥–º–∏–Ω–∞:', updateError);
                        } else {
                            console.log('–†–æ–ª—å –∞–¥–º–∏–Ω–∞ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∞');
                        }
                    }
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/–ø—Ä–æ–≤–µ—Ä–∫–µ –∞–¥–º–∏–Ω–∞:', error);
            }
        }
        // –û—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('beforeunload', function() {
            if (chatInterval) {
                clearInterval(chatInterval);
            }
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –≤—ã—Ö–æ–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            if (isLoggedIn) {
                addSystemMessage(`${currentUsername} –ø–æ–∫–∏–Ω—É–ª —Å–≤—è—â–µ–Ω–Ω—ã–π —á–∞—Ç`);
            }
        });
    </script>
</body>
</html>
